{"hierarchy":{"paths":[["doc:\/\/ArgumentParser\/documentation\/ArgumentParser"]]},"seeAlsoSections":[{"anchor":"Essentials","identifiers":["doc:\/\/ArgumentParser\/documentation\/ArgumentParser\/GettingStarted","doc:\/\/ArgumentParser\/documentation\/ArgumentParser\/ParsableCommand","doc:\/\/ArgumentParser\/documentation\/ArgumentParser\/CommandsAndSubcommands","doc:\/\/ArgumentParser\/documentation\/ArgumentParser\/CustomizingCommandHelp"],"generated":true,"title":"Essentials"}],"sections":[],"primaryContentSections":[{"kind":"declarations","declarations":[{"tokens":[{"text":"protocol","kind":"keyword"},{"text":" ","kind":"text"},{"text":"AsyncParsableCommand","kind":"identifier"},{"text":" : ","kind":"text"},{"text":"ParsableCommand","preciseIdentifier":"s:14ArgumentParser15ParsableCommandP","identifier":"doc:\/\/ArgumentParser\/documentation\/ArgumentParser\/ParsableCommand","kind":"typeIdentifier"}],"platforms":["macOS"],"languages":["swift"]}]},{"kind":"mentions","mentions":["doc:\/\/ArgumentParser\/documentation\/ArgumentParser\/Validation"]},{"content":[{"level":2,"type":"heading","text":"Overview","anchor":"overview"},{"inlineContent":[{"text":"To use ","type":"text"},{"code":"async","type":"codeVoice"},{"text":"\/","type":"text"},{"code":"await","type":"codeVoice"},{"text":" code in your commands’ ","type":"text"},{"code":"run()","type":"codeVoice"},{"text":" method implementations, follow these steps:","type":"text"}],"type":"paragraph"},{"type":"orderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"For the root command in your command-line tool, declare conformance to "},{"type":"codeVoice","code":"AsyncParsableCommand"},{"type":"text","text":", whether or not that command uses asynchronous code."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Apply the ","type":"text"},{"code":"@main","type":"codeVoice"},{"text":" attribute to the root command. (Note: If your root command is in a ","type":"text"},{"code":"main.swift","type":"codeVoice"},{"text":" file, rename the file to the name of the command.)","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"For any command that needs to use asynchronous code, declare conformance to ","type":"text"},{"code":"AsyncParsableCommand","type":"codeVoice"},{"text":" and mark the ","type":"text"},{"code":"run()","type":"codeVoice"},{"text":" method as ","type":"text"},{"code":"async","type":"codeVoice"},{"text":". No changes are needed for subcommands that don’t use asynchronous code.","type":"text"}]}]}]},{"inlineContent":[{"text":"The following example declares a ","type":"text"},{"code":"CountLines","type":"codeVoice"},{"text":" command that uses Foundation’s asynchronous ","type":"text"},{"code":"FileHandle.AsyncBytes","type":"codeVoice"},{"text":" to read the lines from a file:","type":"text"}],"type":"paragraph"},{"code":["import Foundation","","@main","struct CountLines: AsyncParsableCommand {","    @Argument(transform: URL.init(fileURLWithPath:))","    var inputFile: URL","","    mutating func run() async throws {","        let fileHandle = try FileHandle(forReadingFrom: inputFile)","        let lineCount = try await fileHandle.bytes.lines.reduce(into: 0) ","            { count, _ in count += 1 }","        print(lineCount)","    }","}"],"type":"codeListing","syntax":"swift"},{"name":"Note","type":"aside","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"The Swift compiler uses either the type marked with "},{"type":"codeVoice","code":"@main"},{"type":"text","text":" or a "},{"type":"codeVoice","code":"main.swift"},{"type":"text","text":" file as the entry point for an executable program. You can use either one, but not both — rename your "},{"type":"codeVoice","code":"main.swift"},{"type":"text","text":" file to the name of the command when you add "},{"type":"codeVoice","code":"@main"},{"type":"text","text":"."}]}],"style":"note"},{"level":3,"type":"heading","text":"Usage in Swift 5.5","anchor":"Usage-in-Swift-55"},{"inlineContent":[{"text":"Swift 5.5 is supported by the obsolete versions 1.1.x & 1.2.x versions of Swift Argument Parser.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"In Swift 5.5, an asynchronous "},{"type":"codeVoice","code":"@main"},{"type":"text","text":" entry point must be declared as a separate standalone type."}],"type":"paragraph"},{"inlineContent":[{"text":"Your root command cannot be designated as ","type":"text"},{"type":"codeVoice","code":"@main"},{"text":", unlike as described above.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"Instead, use the code snippet below, replacing the "},{"code":"<#RootCommand#>","type":"codeVoice"},{"type":"text","text":" placeholder with the name of your own root command."}],"type":"paragraph"},{"code":["@main struct AsyncMain: AsyncMainProtocol {","    typealias Command = <#RootCommand#>","}"],"type":"codeListing","syntax":"swift"},{"inlineContent":[{"type":"text","text":"Continue to follow the other steps above to use "},{"code":"async","type":"codeVoice"},{"type":"text","text":"\/"},{"code":"await","type":"codeVoice"},{"type":"text","text":" code within your commands’ "},{"code":"run()","type":"codeVoice"},{"type":"text","text":" methods."}],"type":"paragraph"}],"kind":"content"}],"schemaVersion":{"patch":0,"major":0,"minor":3},"abstract":[{"type":"text","text":"A type that can be executed asynchronously, as part of a nested tree of"},{"type":"text","text":" "},{"type":"text","text":"commands."}],"metadata":{"title":"AsyncParsableCommand","symbolKind":"protocol","roleHeading":"Protocol","platforms":[{"unavailable":false,"name":"iOS","introducedAt":"13.0","beta":false,"deprecated":false},{"unavailable":false,"name":"Mac Catalyst","introducedAt":"13.0","beta":false,"deprecated":false},{"unavailable":false,"name":"macOS","introducedAt":"10.15","beta":false,"deprecated":false},{"unavailable":false,"name":"tvOS","introducedAt":"13.0","beta":false,"deprecated":false},{"unavailable":false,"name":"watchOS","introducedAt":"6.0","beta":false,"deprecated":false}],"externalID":"s:14ArgumentParser20AsyncParsableCommandP","modules":[{"name":"ArgumentParser"}],"fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"AsyncParsableCommand"}],"navigatorTitle":[{"kind":"identifier","text":"AsyncParsableCommand"}],"role":"symbol"},"kind":"symbol","relationshipsSections":[{"kind":"relationships","identifiers":["doc:\/\/ArgumentParser\/documentation\/ArgumentParser\/ParsableArguments","doc:\/\/ArgumentParser\/documentation\/ArgumentParser\/ParsableCommand","doc:\/\/ArgumentParser\/Se","doc:\/\/ArgumentParser\/s16SendableMetatypeP"],"type":"inheritsFrom","title":"Inherits From"}],"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/ArgumentParser\/documentation\/ArgumentParser\/AsyncParsableCommand"},"variants":[{"paths":["\/documentation\/argumentparser\/asyncparsablecommand"],"traits":[{"interfaceLanguage":"swift"}]}],"topicSections":[{"anchor":"Implementing-a-Commands-Behavior","identifiers":["doc:\/\/ArgumentParser\/documentation\/ArgumentParser\/AsyncParsableCommand\/run()"],"title":"Implementing a Command’s Behavior"},{"anchor":"Starting-the-Program","identifiers":["doc:\/\/ArgumentParser\/documentation\/ArgumentParser\/AsyncParsableCommand\/main()","doc:\/\/ArgumentParser\/documentation\/ArgumentParser\/AsyncMainProtocol"],"title":"Starting the Program"},{"anchor":"Type-Methods","identifiers":["doc:\/\/ArgumentParser\/documentation\/ArgumentParser\/AsyncParsableCommand\/main(_:)"],"generated":true,"title":"Type Methods"}],"references":{"doc://ArgumentParser/documentation/ArgumentParser/ParsableArguments":{"role":"symbol","type":"topic","kind":"symbol","url":"\/documentation\/argumentparser\/parsablearguments","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"ParsableArguments"}],"identifier":"doc:\/\/ArgumentParser\/documentation\/ArgumentParser\/ParsableArguments","title":"ParsableArguments","abstract":[{"type":"text","text":"A type that can be parsed from a program’s command-line arguments."}],"navigatorTitle":[{"kind":"identifier","text":"ParsableArguments"}]},"doc://ArgumentParser/documentation/ArgumentParser/Validation":{"abstract":[{"type":"text","text":"Provide helpful feedback to users when things go wrong."}],"role":"article","identifier":"doc:\/\/ArgumentParser\/documentation\/ArgumentParser\/Validation","title":"Providing Custom Validation","type":"topic","kind":"article","url":"\/documentation\/argumentparser\/validation"},"doc://ArgumentParser/documentation/ArgumentParser/AsyncParsableCommand/run()":{"title":"run()","identifier":"doc:\/\/ArgumentParser\/documentation\/ArgumentParser\/AsyncParsableCommand\/run()","kind":"symbol","type":"topic","required":true,"abstract":[{"type":"text","text":"The behavior or functionality of this command."}],"role":"symbol","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"run"},{"kind":"text","text":"() "},{"kind":"keyword","text":"async"},{"kind":"text","text":" "},{"kind":"keyword","text":"throws"}],"url":"\/documentation\/argumentparser\/asyncparsablecommand\/run()"},"doc://ArgumentParser/documentation/ArgumentParser/AsyncParsableCommand/main(_:)":{"fragments":[{"text":"static","kind":"keyword"},{"text":" ","kind":"text"},{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"main","kind":"identifier"},{"text":"([","kind":"text"},{"preciseIdentifier":"s:SS","text":"String","kind":"typeIdentifier"},{"text":"]?) ","kind":"text"},{"text":"async","kind":"keyword"}],"abstract":[{"type":"text","text":"Executes this command, or one of its subcommands, with the given arguments."}],"kind":"symbol","identifier":"doc:\/\/ArgumentParser\/documentation\/ArgumentParser\/AsyncParsableCommand\/main(_:)","type":"topic","url":"\/documentation\/argumentparser\/asyncparsablecommand\/main(_:)","title":"main(_:)","role":"symbol"},"doc://ArgumentParser/documentation/ArgumentParser/CustomizingCommandHelp":{"kind":"article","title":"Customizing Help for Commands","abstract":[{"text":"Define your command’s abstract, extended discussion, or usage string, and set the flags used to invoke the help display.","type":"text"}],"url":"\/documentation\/argumentparser\/customizingcommandhelp","type":"topic","identifier":"doc:\/\/ArgumentParser\/documentation\/ArgumentParser\/CustomizingCommandHelp","role":"article"},"doc://ArgumentParser/documentation/ArgumentParser/ParsableCommand":{"navigatorTitle":[{"text":"ParsableCommand","kind":"identifier"}],"title":"ParsableCommand","url":"\/documentation\/argumentparser\/parsablecommand","abstract":[{"text":"A type that can be executed as part of a nested tree of commands.","type":"text"}],"fragments":[{"text":"protocol","kind":"keyword"},{"text":" ","kind":"text"},{"text":"ParsableCommand","kind":"identifier"}],"identifier":"doc:\/\/ArgumentParser\/documentation\/ArgumentParser\/ParsableCommand","type":"topic","role":"symbol","kind":"symbol"},"doc://ArgumentParser/documentation/ArgumentParser/AsyncParsableCommand":{"kind":"symbol","identifier":"doc:\/\/ArgumentParser\/documentation\/ArgumentParser\/AsyncParsableCommand","type":"topic","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"AsyncParsableCommand"}],"url":"\/documentation\/argumentparser\/asyncparsablecommand","abstract":[{"text":"A type that can be executed asynchronously, as part of a nested tree of","type":"text"},{"text":" ","type":"text"},{"text":"commands.","type":"text"}],"navigatorTitle":[{"kind":"identifier","text":"AsyncParsableCommand"}],"role":"symbol","title":"AsyncParsableCommand"},"doc://ArgumentParser/Se":{"identifier":"doc:\/\/ArgumentParser\/Se","type":"unresolvable","title":"Swift.Decodable"},"doc://ArgumentParser/documentation/ArgumentParser/AsyncParsableCommand/main()":{"identifier":"doc:\/\/ArgumentParser\/documentation\/ArgumentParser\/AsyncParsableCommand\/main()","fragments":[{"text":"static","kind":"keyword"},{"text":" ","kind":"text"},{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"main","kind":"identifier"},{"text":"() ","kind":"text"},{"text":"async","kind":"keyword"}],"abstract":[{"type":"text","text":"Executes this command, or one of its subcommands, with the program’s"},{"type":"text","text":" "},{"type":"text","text":"command-line arguments."}],"title":"main()","url":"\/documentation\/argumentparser\/asyncparsablecommand\/main()","kind":"symbol","role":"symbol","type":"topic"},"doc://ArgumentParser/s16SendableMetatypeP":{"identifier":"doc:\/\/ArgumentParser\/s16SendableMetatypeP","type":"unresolvable","title":"Swift.SendableMetatype"},"doc://ArgumentParser/documentation/ArgumentParser/GettingStarted":{"abstract":[{"text":"Learn to set up and customize a simple command-line tool.","type":"text"}],"url":"\/documentation\/argumentparser\/gettingstarted","role":"article","kind":"article","type":"topic","title":"Getting Started with ArgumentParser","identifier":"doc:\/\/ArgumentParser\/documentation\/ArgumentParser\/GettingStarted"},"doc://ArgumentParser/documentation/ArgumentParser/AsyncMainProtocol":{"identifier":"doc:\/\/ArgumentParser\/documentation\/ArgumentParser\/AsyncMainProtocol","type":"topic","url":"\/documentation\/argumentparser\/asyncmainprotocol","title":"AsyncMainProtocol","kind":"symbol","fragments":[{"text":"protocol","kind":"keyword"},{"text":" ","kind":"text"},{"text":"AsyncMainProtocol","kind":"identifier"}],"role":"symbol","deprecated":true,"abstract":[{"type":"text","text":"A type that can designate an "},{"type":"codeVoice","code":"AsyncParsableCommand"},{"type":"text","text":" as the program’s"},{"type":"text","text":" "},{"type":"text","text":"entry point."}],"navigatorTitle":[{"text":"AsyncMainProtocol","kind":"identifier"}]},"doc://ArgumentParser/documentation/ArgumentParser/CommandsAndSubcommands":{"role":"article","url":"\/documentation\/argumentparser\/commandsandsubcommands","type":"topic","kind":"article","abstract":[{"text":"Break complex command-line tools into a tree of subcommands.","type":"text"}],"identifier":"doc:\/\/ArgumentParser\/documentation\/ArgumentParser\/CommandsAndSubcommands","title":"Defining Commands and Subcommands"},"doc://ArgumentParser/documentation/ArgumentParser":{"title":"ArgumentParser","role":"collection","type":"topic","abstract":[{"type":"text","text":"Straightforward, type-safe argument parsing for Swift."}],"url":"\/documentation\/argumentparser","identifier":"doc:\/\/ArgumentParser\/documentation\/ArgumentParser","kind":"symbol"}}}